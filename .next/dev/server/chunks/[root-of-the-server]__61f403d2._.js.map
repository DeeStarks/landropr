{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/deestarks/Desktop/landrop/lib/file-store.ts"],"sourcesContent":["export interface FileItem {\n  id: string\n  name: string\n  originalName: string\n  size: number\n  compressedSize: number\n  type: string\n  folderId: string | null\n  createdAt: Date\n  data: string // base64 compressed data\n}\n\nexport interface Folder {\n  id: string\n  name: string\n  parentId: string | null\n  createdAt: Date\n}\n\n// In-memory store (persists during server runtime)\nconst files: Map<string, FileItem> = new Map()\nconst folders: Map<string, Folder> = new Map()\n\n// Initialize with root folder\nfolders.set(\"root\", {\n  id: \"root\",\n  name: \"Root\",\n  parentId: null,\n  createdAt: new Date(),\n})\n\nexport function getFiles(folderId: string | null = null): FileItem[] {\n  return Array.from(files.values())\n    .filter((f) => f.folderId === folderId)\n    .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())\n}\n\nexport function getAllFiles(): FileItem[] {\n  return Array.from(files.values()).sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())\n}\n\nexport function getFile(id: string): FileItem | undefined {\n  return files.get(id)\n}\n\nexport function addFile(file: FileItem): void {\n  files.set(file.id, file)\n}\n\nexport function deleteFile(id: string): boolean {\n  return files.delete(id)\n}\n\nexport function getFolders(parentId: string | null = null): Folder[] {\n  return Array.from(folders.values())\n    .filter((f) => f.parentId === parentId && f.id !== \"root\")\n    .sort((a, b) => a.name.localeCompare(b.name))\n}\n\nexport function getFolder(id: string): Folder | undefined {\n  return folders.get(id)\n}\n\nexport function addFolder(folder: Folder): void {\n  folders.set(folder.id, folder)\n}\n\nexport function deleteFolder(id: string): boolean {\n  // Delete all files in folder\n  const folderFiles = getFiles(id)\n  folderFiles.forEach((f) => files.delete(f.id))\n\n  // Delete all subfolders recursively\n  const subfolders = getFolders(id)\n  subfolders.forEach((sf) => deleteFolder(sf.id))\n\n  return folders.delete(id)\n}\n\nexport function getBreadcrumbs(folderId: string | null): Folder[] {\n  const breadcrumbs: Folder[] = []\n  let currentId = folderId\n\n  while (currentId) {\n    const folder = folders.get(currentId)\n    if (folder) {\n      breadcrumbs.unshift(folder)\n      currentId = folder.parentId\n    } else {\n      break\n    }\n  }\n\n  return breadcrumbs\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAmBA,mDAAmD;AACnD,MAAM,QAA+B,IAAI;AACzC,MAAM,UAA+B,IAAI;AAEzC,8BAA8B;AAC9B,QAAQ,GAAG,CAAC,QAAQ;IAClB,IAAI;IACJ,MAAM;IACN,UAAU;IACV,WAAW,IAAI;AACjB;AAEO,SAAS,SAAS,WAA0B,IAAI;IACrD,OAAO,MAAM,IAAI,CAAC,MAAM,MAAM,IAC3B,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,UAC7B,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,CAAC,OAAO,KAAK,EAAE,SAAS,CAAC,OAAO;AAC/D;AAEO,SAAS;IACd,OAAO,MAAM,IAAI,CAAC,MAAM,MAAM,IAAI,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,CAAC,OAAO,KAAK,EAAE,SAAS,CAAC,OAAO;AAC9F;AAEO,SAAS,QAAQ,EAAU;IAChC,OAAO,MAAM,GAAG,CAAC;AACnB;AAEO,SAAS,QAAQ,IAAc;IACpC,MAAM,GAAG,CAAC,KAAK,EAAE,EAAE;AACrB;AAEO,SAAS,WAAW,EAAU;IACnC,OAAO,MAAM,MAAM,CAAC;AACtB;AAEO,SAAS,WAAW,WAA0B,IAAI;IACvD,OAAO,MAAM,IAAI,CAAC,QAAQ,MAAM,IAC7B,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,YAAY,EAAE,EAAE,KAAK,QAClD,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;AAC/C;AAEO,SAAS,UAAU,EAAU;IAClC,OAAO,QAAQ,GAAG,CAAC;AACrB;AAEO,SAAS,UAAU,MAAc;IACtC,QAAQ,GAAG,CAAC,OAAO,EAAE,EAAE;AACzB;AAEO,SAAS,aAAa,EAAU;IACrC,6BAA6B;IAC7B,MAAM,cAAc,SAAS;IAC7B,YAAY,OAAO,CAAC,CAAC,IAAM,MAAM,MAAM,CAAC,EAAE,EAAE;IAE5C,oCAAoC;IACpC,MAAM,aAAa,WAAW;IAC9B,WAAW,OAAO,CAAC,CAAC,KAAO,aAAa,GAAG,EAAE;IAE7C,OAAO,QAAQ,MAAM,CAAC;AACxB;AAEO,SAAS,eAAe,QAAuB;IACpD,MAAM,cAAwB,EAAE;IAChC,IAAI,YAAY;IAEhB,MAAO,UAAW;QAChB,MAAM,SAAS,QAAQ,GAAG,CAAC;QAC3B,IAAI,QAAQ;YACV,YAAY,OAAO,CAAC;YACpB,YAAY,OAAO,QAAQ;QAC7B,OAAO;YACL;QACF;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///home/deestarks/Desktop/landrop/app/api/folders/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { addFolder, getFolders, getBreadcrumbs, type Folder } from \"@/lib/file-store\"\n\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams\n  const parentId = searchParams.get(\"parentId\")\n  const breadcrumbs = searchParams.get(\"breadcrumbs\")\n\n  if (breadcrumbs) {\n    const crumbs = getBreadcrumbs(breadcrumbs)\n    return NextResponse.json(crumbs)\n  }\n\n  const folders = getFolders(parentId)\n  return NextResponse.json(folders)\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { name, parentId } = body\n\n    if (!name) {\n      return NextResponse.json({ error: \"Folder name required\" }, { status: 400 })\n    }\n\n    const folder: Folder = {\n      id: crypto.randomUUID(),\n      name,\n      parentId: parentId || null,\n      createdAt: new Date(),\n    }\n\n    addFolder(folder)\n\n    return NextResponse.json(folder)\n  } catch {\n    return NextResponse.json({ error: \"Failed to create folder\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IACjD,MAAM,WAAW,aAAa,GAAG,CAAC;IAClC,MAAM,cAAc,aAAa,GAAG,CAAC;IAErC,IAAI,aAAa;QACf,MAAM,SAAS,IAAA,mJAAc,EAAC;QAC9B,OAAO,2JAAY,CAAC,IAAI,CAAC;IAC3B;IAEA,MAAM,UAAU,IAAA,+IAAU,EAAC;IAC3B,OAAO,2JAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG;QAE3B,IAAI,CAAC,MAAM;YACT,OAAO,2JAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC5E;QAEA,MAAM,SAAiB;YACrB,IAAI,OAAO,UAAU;YACrB;YACA,UAAU,YAAY;YACtB,WAAW,IAAI;QACjB;QAEA,IAAA,8IAAS,EAAC;QAEV,OAAO,2JAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAM;QACN,OAAO,2JAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF"}}]
}